<!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;color:black;background:white;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">check_availability</span>(<span style="color: #008000">self</span>):
        Log<span style="color: #666666">.</span>debug(<span style="color: #BA2121">&#39;Checking availability of domain </span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>full_domain)
        request_url <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;</span><span style="color: #BB6688; font-weight: bold">%s%s</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> (API_URL, DOMAIN_AVAILABLE)
        request_data <span style="color: #666666">=</span> urllib<span style="color: #666666">.</span>urlencode({
            <span style="color: #BA2121">&#39;auth-userid&#39;</span>: ID,
            <span style="color: #BA2121">&#39;auth-password&#39;</span>: PWD,
            <span style="color: #BA2121">&#39;domain-name&#39;</span>: <span style="color: #008000">self</span><span style="color: #666666">.</span>domain_name,
            <span style="color: #BA2121">&#39;tlds&#39;</span>: <span style="color: #008000">self</span><span style="color: #666666">.</span>tld
        })
        request <span style="color: #666666">=</span> request_url <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;?&#39;</span> <span style="color: #666666">+</span> request_data
        response <span style="color: #666666">=</span> get_response(request)

        <span style="color: #008000; font-weight: bold">try</span>:
            <span style="color: #008000; font-weight: bold">return</span> response[<span style="color: #008000">self</span><span style="color: #666666">.</span>full_domain][<span style="color: #BA2121">&#39;status&#39;</span>]
        <span style="color: #008000; font-weight: bold">except</span> <span style="color: #D2413A; font-weight: bold">Exception</span> <span style="color: #008000; font-weight: bold">as</span> e:
            Log<span style="color: #666666">.</span>error(<span style="color: #BA2121">&#39;check_availability. domain=</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">. response=</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> (<span style="color: #008000">self</span><span style="color: #666666">.</span>full_domain, response), exc_info<span style="color: #666666">=</span>e)
            <span style="color: #008000; font-weight: bold">raise</span>
</pre></td></tr></table></div>
